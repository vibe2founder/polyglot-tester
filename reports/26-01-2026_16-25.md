# Relatório Técnico: Dialeto de Testes de API

**Data:** 26-01-2026
**Objetivo:** Implementação de um dialeto (DSL) fluído para testes de API utilizando padrões @purecore.

## O que foi feito
1. **Tipagem Semântica Nominal**: Criação de tipos específicos em `types/api-types.ts` para garantir que primitivos não sejam usados arbitrariamente.
2. **Implementação do @purecore/reqify (Local)**: Wrapper minimalista sobre o `fetch` nativo do Bun, evitando dependências externas como Axios, conforme as regras do projeto.
3. **DSL de Testes (ApiSpec)**: Implementação da classe `ApiTestDialect` que permite a definição de testes de forma declarativa e legível (Given/When/Then pattern).
4. **Validação de Schema**: Sistema local básico para validação de estrutura de resposta sem bibliotecas externas.
5. **Demonstração**: Script em `examples/test-api.ts` validando o funcionamento contra a API JSONPlaceholder.

## Por que foi feito
A criação de um dialeto específico simplifica a escrita de testes de integração, tornando-os autodocumentados e garantindo que sigam as premissas de invariantes do sistema. O uso de implementações locais e tipos nominais reforça a segurança e a manutenibilidade do código, evitando "leakage" de dependências externas e garantindo que os dados trafegados nas APIs sejam semanticamente corretos.

## Como funciona
O dialeto utiliza encadeamento de métodos (chaining):
```typescript
await ApiSpec.define("Nome do Teste")
  .from("URL_BASE")
  .get("/rota")
  .shouldReturn(200)
  .matchingSchema({ chave: "tipo" })
  .run();
```

## Como testar
Execute o comando via WSL:
```bash
bun run examples/test-api.ts
```
